.. _2.2.3_js:

2.2.3 DHT-11
===============

はじめに
--------------

デジタル温度・湿度センサーDHT11は、温度と湿度のキャリブレートされたデジタル信号出力を含む複合センサーです。専用のデジタルモジュールの収集技術と温湿度センシング技術が適用され、製品の高い信頼性と優れた安定性が確保されています。

センサーには、湿度抵抗センサーとNTC温度センサーが含まれており、これらは高性能の8ビットマイクロコントローラに接続されています。

必要な部品
------------------------------

このプロジェクトには、以下の部品が必要です。

.. image:: ../img/list_2.2.3_dht-11.png

キット全体を購入することは非常に便利です。以下がリンクです：

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - 名前
        - このキットのアイテム
        - リンク
    *   - Raphael Kit
        - 337
        - |link_Raphael_kit|

以下のリンクから個別に購入することもできます。

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - コンポーネントの紹介
        - 購入リンク

    *   - :ref:`cpn_gpio_board`
        - |link_gpio_board_buy|
    *   - :ref:`cpn_breadboard`
        - |link_breadboard_buy|
    *   - :ref:`cpn_wires`
        - |link_wires_buy|
    *   - :ref:`cpn_resistor`
        - |link_resistor_buy|
    *   - :ref:`cpn_humiture_sensor`
        - |link_humiture_buy|

回路図
-----------------

.. image:: ../img/image326.png

実験手順
-----------------------

**ステップ1:** 回路を組み立てます。

.. image:: ../img/image207.png

**ステップ2:** コードのフォルダに移動します。

.. raw:: html

   <run></run>

.. code-block::

    cd ~/raphael-kit/nodejs/

**ステップ3:** 依存関係をインストールします。

.. raw:: html

   <run></run>

.. code-block:: 

    sudo npm install node-dht-sensor

**ステップ4:** コードを実行します。

.. raw:: html

   <run></run>

.. code-block::

    sudo node dht11.js

コードが実行された後、プログラムはコンピュータの画面上でDHT11によって検出された温度と湿度を表示します。

**コード**

.. code-block:: js

    var sensor = require("node-dht-sensor");

    setInterval(function(){ 
      sensor.read(11, 17, function(err, temperature, humidity) {
        if (!err) {
          console.log(`temp: ${temperature}\`C, humidity: ${humidity}%`);
        }
      });
    },1000);

**コード説明**

.. code-block:: js

    var sensor = require("node-dht-sensor");

``node-dht-sensor`` モジュールをインポートします。これにより、DHT-11の値を読み取るための関数が提供されます。

.. note::
  詳細は以下のリンクを参照してください: https://www.npmjs.com/package/node-dht-sensor

.. code-block:: js

    sensor.read(11, 17, function(err, temperature, humidity){...})

``node-dht-sensor`` モジュールは、測定された温度と湿度を読み取るための ``read()`` 関数を提供しています。ここで、 **11** はDHT-11を意味し、 **17** はそれがGPIO17に接続されていることを意味します。

.. code-block:: js

    if (!err) {
      console.log(`temp: ${temperature}\`C, humidity: ${humidity}%`);
    }    

読み取りにエラーがない場合、温度と湿度の値が端末に表示されます。

現象の画像
------------------

.. image:: ../img/image209.jpeg
    