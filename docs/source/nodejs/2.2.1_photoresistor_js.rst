.. _2.2.1_js:

2.2.1 フォトレジスタ
=========================

はじめに
------------

フォトレジスタは日常生活でよく使われる環境光強度の部品です。これにより、コントローラーは昼と夜を認識し、夜のランプなどの照明制御機能を実現します。このプロジェクトはポテンショメータに非常に似ており、それが光を感知するために電圧を変えると考えるかもしれません。

必要な部品
------------------------------

このプロジェクトでは、以下の部品が必要です。

.. image:: ../img/list_2.2.1_photoresistor.png

キット全体を購入するのは確かに便利です。リンクはこちら：

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - 名前
        - このキットのアイテム
        - リンク
    *   - Raphael Kit
        - 337
        - |link_Raphael_kit|

以下のリンクから個別に購入することもできます。

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - コンポーネントの紹介
        - 購入リンク

    *   - :ref:`GPIO拡張ボード`
        - |link_gpio_board_buy|
    *   - :ref:`ブレッドボード`
        - |link_breadboard_buy|
    *   - :ref:`ジャンパーワイヤー`
        - |link_wires_buy|
    *   - :ref:`抵抗器`
        - |link_resistor_buy|
    *   - :ref:`LED`
        - |link_led_buy|
    *   - :ref:`ADC0834`
        - \-
    *   - :ref:`フォトレジスタ`
        - |link_photoresistor_buy|

回路図
-----------------

.. image:: ../img/image321.png

.. image:: ../img/image322.png

実験手順
-----------------------

**ステップ1:** 回路を組み立てます。

.. image:: ../img/image198.png

**ステップ2:** コードのフォルダに移動します。

.. raw:: html

   <run></run>

.. code-block:: 

    cd ~/raphael-kit/nodejs/

**ステップ3:** コードを実行します。

.. raw:: html

   <run></run>

.. code-block::

    sudo node photoresistor.js

コードを実行している間、LEDの明るさはフォトレジスタで感知される光の強度に応じて変わります。

**コード**

.. code-block:: js

    const Gpio = require('pigpio').Gpio;
    const ADC0834 = require('./adc0834.js').ADC0834;

    exports.ADC0834 = ADC0834;

    const adc = new ADC0834(17, 18, 27);

    const led = new Gpio(22, {mode: Gpio.OUTPUT});

    setInterval(() => {
      adc.read(0).then((value) => {
        console.log(value);
        led.pwmWrite(value);
      }, (error)=>{
        console.log("Error: " + error);
      });
    }, 100);

**コード説明**

ここでのコードは2.1.7ポテンショメータと同じです。
詳細は :ref:`2.1.7_js` のコード説明をご参照ください。

現象の画像
------------------

.. image:: ../img/image199.jpeg

