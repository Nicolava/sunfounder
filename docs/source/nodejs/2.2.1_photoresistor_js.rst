 
.. _2.2.1_js:

2.2.1 Photoresistor
=========================

Introduction
---------------

La photorésistance est un composant couramment utilisé pour mesurer l'intensité de la lumière 
ambiante dans la vie quotidienne. Elle permet au contrôleur de distinguer le jour de la nuit et 
de réaliser des fonctions de contrôle de la lumière telles que la lampe de nuit. Ce projet est 
très similaire à celui du potentiomètre, et vous pourriez penser qu'il s'agit de changer la tension 
pour détecter la lumière.

Required Components
------------------------------

Dans ce projet, nous avons besoin des composants suivants. 

.. image:: ../img/list_2.2.1_photoresistor.png

Il est certainement pratique d'acheter un kit complet, voici le lien : 

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - Nom	
        - ÉLÉMENTS DANS CE KIT
        - LIEN
    *   - Kit Raphael
        - 337
        - |link_Raphael_kit|

Vous pouvez également les acheter séparément via les liens ci-dessous.

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - INTRODUCTION DU COMPOSANT
        - LIEN D'ACHAT

    *   - :ref:`cpn_gpio_extension_board`
        - |link_gpio_board_buy|
    *   - :ref:`cpn_breadboard`
        - |link_breadboard_buy|
    *   - :ref:`cpn_wires`
        - |link_wires_buy|
    *   - :ref:`cpn_resistor`
        - |link_resistor_buy|
    *   - :ref:`cpn_led`
        - |link_led_buy|
    *   - :ref:`cpn_adc0834`
        - \-
    *   - :ref:`cpn_photoresistor`
        - |link_photoresistor_buy|

Schematic Diagram
-----------------

.. image:: ../img/image321.png


.. image:: ../img/image322.png

Procédures Expérimentales
------------------------------

**Étape 1 :** Construisez le circuit.

.. image:: ../img/image198.png

**Étape 2 :** Accédez au dossier du code.

.. raw:: html

   <run></run>

.. code-block:: 

    cd ~/raphael-kit/nodejs/

**Étape 3 :** Exécutez le code.

.. raw:: html

   <run></run>

.. code-block:: 

    sudo node photoresistor.js

Lorsque le code est en cours d'exécution, 
la luminosité de la LED changera en fonction de l'intensité lumineuse détectée par la photorésistance.

**Code**

.. code-block:: js

    const Gpio = require('pigpio').Gpio;
    const ADC0834 = require('./adc0834.js').ADC0834;

    exports.ADC0834 = ADC0834;

    const adc = new ADC0834(17, 18, 27);

    const led = new Gpio(22, {mode: Gpio.OUTPUT});

    setInterval(() => {
      adc.read(0).then((value) => {
        console.log(value);
        led.pwmWrite(value);
      }, (error)=>{
        console.log("Error: " + error);
      });
    }, 100);

**Explication du Code**

Les codes ici sont les mêmes que ceux du 2.1.7 Potentiomètre. 
Veuillez consulter l'explication du code de :ref:`2.1.7_js` pour plus de détails.

Image du Phénomène
----------------------

.. image:: ../img/image199.jpeg

