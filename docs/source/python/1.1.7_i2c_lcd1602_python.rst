.. _1.1.7_py:

1.1.7 I2C LCD1602
======================

はじめに
------------------

LCD1602は、キャラクタータイプの液晶ディスプレイで、同時に32
(16×2)文字を表示することができます。

必要な部品
------------------------------

このプロジェクトでは、以下の部品が必要です。

.. image:: ../img/list_i2c_lcd.png

一式を購入することは非常に便利です。以下のリンクから購入できます：

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - 名前	
        - このキットのアイテム
        - リンク
    *   - Raphael Kit
        - 337
        - |link_Raphael_kit|

また、以下のリンクから部品を個別に購入することもできます。

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - コンポーネントの紹介
        - 購入リンク

    *   - :ref:`GPIO拡張ボード`
        - |link_gpio_board_buy|
    *   - :ref:`ブレッドボード`
        - |link_breadboard_buy|
    *   - :ref:`ジャンパーワイヤー`
        - |link_wires_buy|
    *   - :ref:`I2C LCD1602`
        - |link_i2clcd1602_buy|

回路図
---------------------

============ ========
T-Board Name physical
SDA1         Pin 3
SCL1         Pin 5
============ ========

.. image:: ../img/schematic_i2c_lcd.png

実験手順
-----------------------------

**ステップ 1:** 回路を組む。

.. image:: ../img/image96.png

**ステップ 2**: I2Cを設定する（ :ref:`i2c_config` を参照。I2Cが設定されている場合は、このステップをスキップしてください。）

**ステップ 3:** ディレクトリを変更する。

.. raw:: html

   <run></run>

.. code-block::

    cd ~/raphael-kit/python/

**ステップ 4:** 実行する。

.. raw:: html

   <run></run>

.. code-block::

    sudo python3 1.1.7_Lcd1602.py

コードが実行されると、LCDに ``Greetings!, From SunFounder`` と表示されます。

.. note::

    * エラー ``FileNotFoundError: [Errno 2] No such file or directory: '/dev/i2c-1'`` が発生した場合、 :ref:`i2c_config` を参照してI2Cを有効にしてください。
    * ``ModuleNotFoundError: No module named 'smbus2'`` エラーが表示された場合、 ``sudo pip3 install smbus2`` を実行してください。
    * エラー ``OSError: [Errno 121] Remote I/O error`` が表示された場合、モジュールの配線が間違っているか、モジュールが壊れている可能性があります。
    * コードと配線に問題がない場合でも、LCDが内容を表示しない場合は、裏面のポテンショメータを回してコントラストを上げることができます。

**コード** 

.. note::

    以下のコードは **変更/リセット/コピー/実行/停止** が可能です。しかし、それを行う前に、 ``raphael-kit/python`` のようなソースコードのパスに移動する必要があります。コードを変更した後、直接実行して効果を確認できます。

.. raw:: html

    <run></run>

.. code-block:: python

    import LCD1602
    import time

    def setup():
        LCD1602.init(0x27, 1)   # init(slave address, background light)
        LCD1602.write(0, 0, 'Greetings!')
        LCD1602.write(1, 1, 'From SunFounder')
        time.sleep(2)

    def destroy():
        LCD1602.clear()

    if __name__ == "__main__":
        try:
            setup()
        except KeyboardInterrupt:
            destroy()

**コード説明**

.. code-block:: python

    import LCD1602

このファイルは、I2C LCD1602を制御するためのオープンソースファイルであり、簡単にI2C LCD1602を使用することができます。

.. code-block:: python

    LCD1602.init(0x27, 1) 

この関数は、指定されたデバイスシンボルでI2Cシステムを初期化します。最初のパラメータはI2Cデバイスのアドレスで、i2cdetectコマンド（詳細は付録を参照）で検出できます。I2C LCD1602のアドレスは一般的に0x27です。

.. code-block:: python

    LCD1602.write(0, 0, 'Greetings!')

この関数内で、「Greetings!!」はLCDの行0+1、列0+1に印刷される文字です。
これで、LCDに「Greetings!! From SunFounder」と表示されます。

現象の画像
--------------------------

.. image:: ../img/image97.jpeg
