.. note::

    Ciao, benvenuto nella SunFounder Raspberry Pi & Arduino & ESP32 Enthusiasts Community su Facebook! Approfondisci l'esplorazione del Raspberry Pi, Arduino ed ESP32 con altri appassionati.

    **Perch√© unirti a noi?**

    - **Supporto esperto**: Risolvi i problemi post-vendita e le sfide tecniche con l'aiuto della nostra comunit√† e del nostro team.
    - **Impara e condividi**: Scambia consigli e tutorial per migliorare le tue competenze.
    - **Anteprime esclusive**: Accedi in anteprima agli annunci di nuovi prodotti e alle anticipazioni esclusive.
    - **Sconti speciali**: Approfitta di sconti esclusivi sui nostri prodotti pi√π recenti.
    - **Promozioni e omaggi festivi**: Partecipa a omaggi e promozioni speciali durante le festivit√†.

    üëâ Sei pronto a esplorare e creare con noi? Clicca su [|link_sf_facebook|] e unisciti oggi stesso!

.. _3.1.2_py:

3.1.2 Modulo Video
=======================

Introduzione
-------------------

Oltre a scattare foto, il Modulo Fotocamera pu√≤ essere utilizzato anche per registrare video.

Componenti necessari
--------------------------------

In questo progetto avremo bisogno dei seguenti componenti.

.. image:: ../img/photo1.png
  :width: 800

√à sicuramente conveniente acquistare un kit completo, ecco il link:

.. list-table::
    :widths: 20 20 20
    :header-rows: 1

    *   - Nome	
        - ELEMENTI IN QUESTO KIT
        - LINK
    *   - Kit Raphael
        - 337
        - |link_Raphael_kit|

Puoi anche acquistarli separatamente dai link sottostanti.

.. list-table::
    :widths: 30 20
    :header-rows: 1

    *   - INTRODUZIONE AI COMPONENTI
        - LINK PER L'ACQUISTO

    *   - :ref:`cpn_camera_module`
        - |link_camera_buy|

Procedura sperimentale
------------------------------

**Passo 1:** Accedi al desktop del Raspberry Pi. Potresti aver bisogno di uno schermo per un'esperienza migliore, fai riferimento a: `Collega il tuo Raspberry Pi <https://projects.raspberrypi.org/en/projects/raspberry-pi-setting-up/3>`_. Oppure accedi al desktop del Raspberry Pi da remoto, per un tutorial dettagliato fai riferimento a :ref:`remote_desktop`.

**Passo 2:** Controlla se la fotocamera √® abilitata. Per istruzioni, fai riferimento a: :ref:`enable_camera`.

**Passo 3:** Apri un terminale e accedi alla cartella del codice.


.. code-block::

    cd ~/raphael-kit/python/

**Passo 4:** Esegui.


.. code-block::

    sudo python3 3.1.2_VideoModule.py

Esegui il codice per avviare la registrazione. Premi ``Ctrl+C`` per terminare la registrazione. Assegna al video il nome ``my_video.h264`` e memorizzalo nella directory ``~``.

.. note::

    Puoi anche aprire ``3.1.2_PhotographModule.py`` nel percorso ``~/raphael-kit/python/`` con un IDE Python, clicca sul pulsante Run per eseguire e sul pulsante Stop per fermare il codice.

Se desideri inviare le foto al tuo PC, fai riferimento a :ref:`filezilla`.


**Codice**

.. code-block:: python

    from picamera import PiCamera
    import os
    user = os.getlogin()
    user_home = os.path.expanduser(f'~{user}')


    camera = PiCamera()
    
    def setup():
        camera.start_preview(alpha=200)
    
    def main():
        camera.start_recording(f'{user_home}/my_video.h264')
        while True:
            pass    
    
    def destroy():
        camera.stop_recording()
        camera.stop_preview()
    
    if __name__ == '__main__':
        setup()
        try:
            main()
        except KeyboardInterrupt:
            destroy()

**Spiegazione del Codice**

.. code-block:: python

    start_recording(output, format=None, resize=None, splitter_port=1, **options)

Avvia la registrazione video dalla fotocamera, memorizzandola in ``output``.

.. code-block:: python

    camera.stop_recording()

Termina la registrazione.

